<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>LipeRMI</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<style type="text/css">
<!--
body {
	font-family: "Trebuchet MS", Verdana, Arial, Helvetica, sans-serif;
	font-size: 9pt;
	text-align: left;
}
pre {
	font-family: "Lucida Console", "Courier New", Courier, mono;
	font-size: 9pt;
	background-color: #FDFDFD;
	border: 1px solid #003366;
	padding: 10px;
}
a {
	color: #006699;
}
a:hover {
	color: #990000;
}
h1 {
	font-size: 12pt;
}
.highlight {
	font-weight: bold;
}
.lipermi {
	font-weight: bold;
	color: #006699;
}
.menu {
	text-decoration: none;
}
-->
</style>
<script language="JavaScript" type="text/JavaScript">
<!--
function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}

function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}
//-->
</script>
</head>

<body onLoad="MM_preloadImages('img/logo_over.gif','img/bullet_over.gif')">
<table width="100%"  border="0" cellspacing="10" cellpadding="0">
  <tr>
    <td colspan="2"><a href="http://lipermi.sf.net" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('logo','','img/logo_over.gif',1)"><img src="img/logo.gif" alt="LipeRMI" name="logo" width="427" height="90" border="0"></a></td>
  </tr>
  <tr>
    <td align="center" valign="top" style="padding: 10px"><table width="98" border="0" cellpadding="0" cellspacing="0">
      <tr>
        <td width="98" nowrap><div align="left"><a href="index.php.html" class="menu" onMouseOver="MM_swapImage('whatis','','img/bullet_over.gif',1)" onMouseOut="MM_swapImgRestore()"><img src="img/bullet.gif" alt="what is" name="whatis" width="6" height="6" border="0"> what is</a></div></td>
      </tr>
      <tr>
        <td nowrap><div align="left"><a href="download.php.html" class="menu" onMouseOver="MM_swapImage('download','','img/bullet_over.gif',1)" onMouseOut="MM_swapImgRestore()"><img src="img/bullet.gif" alt="download" name="download1" width="6" height="6" border="0" id="download"> download</a></div></td>
      </tr>
      <tr>
        <td nowrap><div align="left"><a href="documentation.php.html" class="menu" onMouseOver="MM_swapImage('documentation','','img/bullet_over.gif',1)" onMouseOut="MM_swapImgRestore()"><img src="img/bullet.gif" alt="documentation" name="documentation" width="6" height="6" border="0"> documentation </a></div></td>
      </tr>
      <tr>
        <td nowrap><div align="left"><a href="faq.php.html" class="menu" onMouseOver="MM_swapImage('faq','','img/bullet_over.gif',1)" onMouseOut="MM_swapImgRestore()"><img src="img/bullet.gif" alt="f.a.q." name="faq" width="6" height="6" border="0" id="download2"> f.a.q. </a></div></td>
      </tr>
      <tr>
        <td nowrap><div align="left"><a href="contribute.php.html" class="menu" onMouseOver="MM_swapImage('contribute','','img/bullet_over.gif',1)" onMouseOut="MM_swapImgRestore()"><img src="img/bullet.gif" alt="contribute" name="contribute" width="6" height="6" border="0" id="download3"> contribute</a></div></td>
      </tr>
      <tr>
        <td nowrap><div align="left"><a href="author.php.html" class="menu" onMouseOver="MM_swapImage('author','','img/bullet_over.gif',1)" onMouseOut="MM_swapImgRestore()"><img src="img/bullet.gif" alt="author" name="author" width="6" height="6" border="0" id="download4"> author </a></div></td>
      </tr>
    </table><br>&nbsp;<br>
    <a href="http://sourceforge.net/donate/index.php?group_id=179398" target="_blank"><img src="http://sourceforge.net/images/x-click-but7.gif" width="72" height="29" border="0"></a>
    <br>&nbsp;<br>
    <a href="http://www.sourceforge.net/projects/lipermi" target="_blank"><img src="http://sourceforge.net/sflogo.php?group_id=179398" width="88" height="31" border="0"></a>

    
    </td>
    <td width="100%" align="center" valign="top"><table width="100%"  border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td width="14" height="14"><img src="img/canto1.gif" width="14" height="14"></td>
        <td width="14" height="14" bgcolor="#E8F4FF"></td>
        <td width="14" height="14"><img src="img/canto2.gif" width="14" height="14"></td>
      </tr>
      <tr bgcolor="#E8F4FF">
        <td width="14"></td>
        <td width="100%" align="left">

  <h1>documentation</h1>
  <blockquote>
    <p class="highlight">Overview</p>
    <p align="center"><img src="docimg/overview.gif" width="556" height="579" border="1"><br>&nbsp;</p>
    <p class="highlight">Basic usage code examples</p>
  <p>Whenever you would need to use LipeRMI, you always must have a CallHandler. CallHandler is responsible for knowing about all local exported objects and about remote instances. So, let's start creating one:</p>
  <pre>CallHandler callHandler = new CallHandler(); </pre>
  <p>Once instanciated, you can use it's methods to export your objects, like this:</p>
  <pre>
InterfaceIAmExposing interfaceImplementation;
interfaceImplementation = new InterfaceIAmExposingImpl();

callHandler.registerGlobal(InterfaceIAmExposing.class,
  interfaceImplementation);</pre>
  <p>Now like a magic you can bind this to a port using the LipeRMI Server object:</p>
  <pre>Server server = new Server();
int thePortIWantToBind = 4455;

server.bind(thePortIWantToBind, callHandler);</pre>
  <p>At this time, our &quot;interfaceImplementation&quot; object instance is completely remote accesible through LipeRMI Client object. The exposed methods in &quot;interfaceImplementation&quot; are described by InterfaceIAmExposing interface.</p>
  <p>So, let's use it in client application. Firstly we need to make a connection to Server: </p>
  <pre>CallHandler callHandler = new CallHandler();
String remoteHost = &quot;localhost&quot;;
int portWasBinded = 4455;

Client client = new Client(remoteHost, portWasBinded, callHandler);</pre>
  <p>Now we can get abstracted proxys for remote objects globally exported: </p>
<pre>InterfaceIAmExposing remoteObject;
remoteObject =
  (InterfaceIAmExposing) client.getGlobal(InterfaceIAmExposing.class);</pre>
  <p>And, finally, remote methods can be invocated in client through this transparent proxy: </p>
    <pre>remoteObject.someMethod();</pre>
    <p class="highlight">&nbsp;<br>Adapting RMI applications to LipeRMI</p>
  <p>You do not need to remove native RMI references to use LipeRMI, however it is highly recommendable.<br>
    Your interface must be cleaner as possible, <span class="highlight">favoring less coupling implementations</span>.</p>
  <p>For this reason, LipeRMI doesn't require your services extend the &quot;Remote&quot; interface. Methods also doesn't need to declare any exceptions like 
  

   RemoteException.</p>
  <p>Because LipeRMI was made to work in Internet environment, Naming and Registry services doesn't make much sense and until now it's not implemented by LipeRMI. The only way to reach a Server is knowing it IP address or hostname.</p>
  <p>Registry binding code must be changed to use the LipeRMI Server object. You can invoke bind() method  informing as arguments port and a CallHandler.</p>
  <p>Client doesn't connect anymore through a Registry. It uses a Client object constructed with server hostname, server port and a Callhandler </p>
  <p>Let's see a quite simple example. Imagine this interface (already with RMI signatures removed): </p>
  <pre>public interface ExampleService {
    void someMethod();

}</pre>
  
  <p>and a implementation to this service in server application:</p>
    <pre>
public class ExampleServiceImpl {
    public void someMethod() {
        System.out.println(&quot;someMethod() called&quot;);
    }

}</pre>

    <p>Now, let's see server code which exports object:</p>
    <pre>ExampleServiceImpl myService = new ExampleServiceImpl();

Naming.rebind(&quot;//localhost:4455/ExampleService&quot;, myService);</pre>
    <p>in LipeRMI it becames:</p>
  <pre>ExampleServiceImpl myService = new ExampleServiceImpl();

// it always need a CallHandler!
CallHandler callHandler = new CallHandler();
callHandler.registerGlobal(ExampleService.class, myService);

server.bind(4455, callHandler);</pre>
  <p>See the difference? The &quot;CallHandler&quot; concept makes RMI more clean decoupling multiple sessions.</p>
  <p>Also, registerGlobal method works very like binding/naming service. The difference here is: without a registry, you always need a connection to get a exported (global or not) object</p>
  <p>At RMI client side we must have some like this:</p>
<pre>ExampleService myServiceRemote;
myServiceRemote =
  (ExampleService) Naming.lookup(&quot;//localhost:4455/ExampleService&quot;);

myServiceRemote.someMethod();</pre>
  <p>with LipeRMI it becames:</p>
  <pre>// it always need a CallHandler!
CallHandler callHandler = new CallHandler();

// first we need to connect..
Client client = new Client(&quot;localhost&quot;, 4455, callHandler);

// then we can get the remote reference
ExampleService myServiceRemote;
  myServiceRemote = (ExampleService) client.getGlobal(TestService.class);

myServiceRemote.someMethod();
</pre>
  <p><br>
    Quite simply, isn't? Just remember: CallHandler is the middlepoint to connections. You only need another CallHandler instance when you need a separated LipeRMI session with different implementations and objects. Also, remember that exporting objects now is a CallHandler task.<br>
  </p>
  <p class="highlight">Adapting remote listeners to LipeRMI </p>
  <p>Remote listeners with RMI are exported using the code below:</p>
  <pre>MyRemoteListener listenerImplementation = new MyRemoteListenerImpl();
int exportedPort = 0; // not specified port

UnicastRemoteObject.exportObject(listenerImplementation, exportedPort);</pre>
  <p>Since with LipeRMI we already have a CallHandler (and generally also a connection), just use it:</p>
  <pre>MyRemoteListener listenerImplementation = new MyRemoteListenerImpl();

callHandler.exportObject(MyRemoteListener.class, listenerImplementation);</pre>
    <p>You don't need to care about your listener port since LipeRMI will uses the already connected socket to transport listener calls.</p>
    <p class="highlight"><br>
      Knowing clients hostname</p>
    <p>With RMI you can call a static method to know who called a local method remotelly.</p>
    <p>You can do this with:</p>
    <pre>UnicastServerRef.getClientHost();</pre>
    <p>which magically returns the hostname of method caller.</p>
    <p>With LipeRMI you can know about the whole socket, so you can do a little bit more ;o).<br>
      It works very like RMI. It is a static method too: </p>
    <pre>CallLookup.getCurrentSocket();</pre>
    <p>&nbsp;</p>
    <p>Future versions of this doc is being written to cover the whole API; including the use of ClientListener, ServerListener and IProtocolFilter. </p>
    <p>For now we recommend you to take a look at  the <a href="download.php.html">javadoc</a> and <a href="http://sourceforge.net/cvs/?group_id=179398">sources</a> to see all LipeRMI improvements!</p>
    </blockquote>

            
		</td>
        <td width="14"></td>
      </tr>
      <tr>
        <td width="14" height="14"><img src="img/canto3.gif" width="14" height="14"></td>
        <td width="14" height="14" bgcolor="#E8F4FF"></td>
        <td width="14" height="14"><img src="img/canto4.gif" width="14" height="14"></td>
      </tr>
    </table></td>
  </tr>
  <tr>
    <td colspan="2" align="center" valign="top" style="padding: 10px">licensed under <a href="license.php.html">LGPL</a> &copy; copyleft 2006 - <a href="mailto:lipeandrade@users.sourceforge.net">felipe santos andrade</a><br>
    unable to connect to database: Lost connection to MySQL server at 'reading initial communication packet', system error: 113